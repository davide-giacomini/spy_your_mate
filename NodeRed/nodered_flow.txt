[{"id":"2c1ee4d7.08a8dc","type":"tab","label":"Logistic Regression","disabled":false,"info":""},{"id":"299cb148.4f9016","type":"tab","label":"Random Forest","disabled":false,"info":""},{"id":"8a9a8a88.ca1ed","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"af16ca46.f30ab","type":"ui_tab","z":"","name":"Demo","icon":"dashboard"},{"id":"8d2cdc77.495e7","type":"ui_group","z":"","name":"Ground truth vs predictions","tab":"d5d66642.c7c8f","disp":true,"width":"13","collapse":false},{"id":"c3124e2.75b4ab","type":"mqtt-broker","z":"","name":"IoT Challenge 2","broker":"mqtt3.thingspeak.com","port":"1883","clientid":"EwsFHR4iERE3OzUwCzUrEQI","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"ad5dbdbd.5fbc4","type":"ui_group","z":"","name":"RSSI Chart","tab":"d5d66642.c7c8f","disp":true,"width":"25","collapse":false},{"id":"d5d66642.c7c8f","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"ffebd66a.fda688","type":"ui_group","z":"","name":"Chart with integer X axis","tab":"2bd35d06.24dc0a","order":1,"disp":true,"width":"12"},{"id":"2bd35d06.24dc0a","type":"ui_tab","z":"","name":"Chart.js example","icon":"dashboard","order":2},{"id":"33f3437c.a31164","type":"file in","z":"2c1ee4d7.08a8dc","name":"Capture file","filename":"/home/user/spy_your_mate/NodeRed/capture2_test_csv_from_wireshark.csv","format":"lines","chunk":false,"sendError":false,"x":290,"y":400,"wires":[["bce7450c.15ea"]]},{"id":"bce7450c.15ea","type":"csv","z":"2c1ee4d7.08a8dc","name":"","sep":",","hdrin":true,"hdrout":"","multi":"mult","ret":"\\n","temp":"","skip":"0","x":470,"y":400,"wires":[["a1d3e162.e95fc8"]]},{"id":"d794c93f.a9e81","type":"function","z":"2c1ee4d7.08a8dc","name":"Prepare ground truth","func":"let capture = msg.payload[\"capture\"];\nlet prediction = msg.payload[\"prediction\"];\n\n\nlet data_capture = [];\n\ncapture.forEach(function (entry) {\n    \n    let time = entry[\"Time\"];\n    let person;\n    \n    if (data_capture.length === 0 || ( parseInt(data_capture[data_capture.length-1][\"x\"] / 0.5) < parseInt(time / 0.5))){\n        \n        if (time < 75) {\n        person = 1;\n        }\n        else if (time < 137) {\n            person = 0;\n        }\n        else if (time < 209) {\n            person = 1;\n        }\n        else if (time < 273) {\n            person = 0;\n        }\n        else {\n            person = 1;\n        }\n        \n        let tuple = {\n            \"x\": time,\n            \"y\": person\n        };\n        \n        data_capture.push(tuple);\n    }\n});\n\n\nlet data_prediction = [];\n\nprediction.forEach(function (entry) {\n    \n    let packetId = entry[\"PacketId\"];\n    let person = entry [\"Person\"];\n    \n    let time = packetId*0.5;\n        \n    let tuple = {\n        \"x\": time,\n        \"y\": person\n    };\n    \n    data_prediction.push(tuple);\n});\n\n\nmsg.payload = [{\n    \"series\": [\"Ground truth\", \"Prediction\"],\n    \"data\": [data_capture, data_prediction],\n    \"labels\": [\"time1\", \"time2\"]\n}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1080,"y":480,"wires":[["fcffee69.d7c76","89124059.a16bf"]]},{"id":"89124059.a16bf","type":"debug","z":"2c1ee4d7.08a8dc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":360,"wires":[]},{"id":"fcffee69.d7c76","type":"ui_chart","z":"2c1ee4d7.08a8dc","name":"","group":"8d2cdc77.495e7","order":0,"width":"0","height":"0","label":"Logistic regression","chartType":"line","legend":"true","xformat":"x","interpolate":"step","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#0096ff","#ff001d","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1070,"y":600,"wires":[[],[]]},{"id":"40c0f32b.6f8224","type":"inject","z":"2c1ee4d7.08a8dc","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":500,"wires":[["33f3437c.a31164","ec88f2b1.20a8a"]]},{"id":"ec88f2b1.20a8a","type":"file in","z":"2c1ee4d7.08a8dc","name":"Prediction file","filename":"/home/user/spy_your_mate/NodeRed/prediction_logistic_regression.csv","format":"lines","chunk":false,"sendError":false,"x":300,"y":600,"wires":[["45535d2.aa1eb24"]]},{"id":"45535d2.aa1eb24","type":"csv","z":"2c1ee4d7.08a8dc","name":"","sep":",","hdrin":true,"hdrout":"","multi":"mult","ret":"\\n","temp":"","skip":"0","x":470,"y":600,"wires":[["acce7ae.33d2508"]]},{"id":"777d69f.f7f8e98","type":"join","z":"2c1ee4d7.08a8dc","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":870,"y":480,"wires":[["d794c93f.a9e81"]]},{"id":"a1d3e162.e95fc8","type":"function","z":"2c1ee4d7.08a8dc","name":"Add topic \"capture\"","func":"msg.topic = \"capture\";\n\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":400,"wires":[["777d69f.f7f8e98"]]},{"id":"acce7ae.33d2508","type":"function","z":"2c1ee4d7.08a8dc","name":"Add topic \"prediction\"","func":"msg.topic = \"prediction\";\n\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":600,"wires":[["777d69f.f7f8e98"]]},{"id":"4e682c47.d88104","type":"file in","z":"299cb148.4f9016","name":"Capture file","filename":"/home/user/spy_your_mate/NodeRed/capture2_test_csv_from_wireshark.csv","format":"lines","chunk":false,"sendError":false,"x":290,"y":140,"wires":[["cd4d28f4.79ec"]]},{"id":"cd4d28f4.79ec","type":"csv","z":"299cb148.4f9016","name":"","sep":",","hdrin":true,"hdrout":"","multi":"mult","ret":"\\n","temp":"","skip":"0","x":470,"y":140,"wires":[["13f34aca.f0f74d"]]},{"id":"d724845e.64327","type":"function","z":"299cb148.4f9016","name":"Prepare ground truth","func":"let capture = msg.payload[\"capture\"];\nlet prediction = msg.payload[\"prediction\"];\n\n\nlet data_capture = [];\n\ncapture.forEach(function (entry) {\n    \n    let time = entry[\"Time\"];\n    let person;\n    \n    if (data_capture.length === 0 || ( parseInt(data_capture[data_capture.length-1][\"x\"] / 0.5) < parseInt(time / 0.5))){\n        \n        if (time < 75) {\n        person = 1;\n        }\n        else if (time < 137) {\n            person = 0;\n        }\n        else if (time < 209) {\n            person = 1;\n        }\n        else if (time < 273) {\n            person = 0;\n        }\n        else {\n            person = 1;\n        }\n        \n        let tuple = {\n            \"x\": time,\n            \"y\": person\n        };\n        \n        data_capture.push(tuple);\n    }\n});\n\n\nlet data_prediction = [];\n\nprediction.forEach(function (entry) {\n    \n    let packetId = entry[\"PacketId\"];\n    let person = entry [\"Person\"];\n    \n    let time = packetId*0.5;\n        \n    let tuple = {\n        \"x\": time,\n        \"y\": person\n    };\n    \n    data_prediction.push(tuple);\n});\n\n\nmsg.payload = [{\n    \"series\": [\"Ground truth\", \"Prediction\"],\n    \"data\": [data_capture, data_prediction],\n    \"labels\": [\"time1\", \"time2\"]\n}];\n\nreturn msg;","outputs":1,"noerr":0,"x":1040,"y":220,"wires":[["503643f6.d004e4","248c6375.29a894"]]},{"id":"248c6375.29a894","type":"debug","z":"299cb148.4f9016","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1010,"y":120,"wires":[]},{"id":"503643f6.d004e4","type":"ui_chart","z":"299cb148.4f9016","name":"","group":"8d2cdc77.495e7","order":0,"width":"0","height":"0","label":"Random forest","chartType":"line","legend":"true","xformat":"x","interpolate":"step","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#0096ff","#ff001d","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"x":1040,"y":320,"wires":[[],[]]},{"id":"7bc2dbf0.8c618c","type":"inject","z":"299cb148.4f9016","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":220,"wires":[["4e682c47.d88104","bd33eae4.e6793"]]},{"id":"bd33eae4.e6793","type":"file in","z":"299cb148.4f9016","name":"Prediction file","filename":"/home/user/spy_your_mate/NodeRed/prediction_random_forest.csv","format":"lines","chunk":false,"sendError":false,"x":300,"y":300,"wires":[["7798f6b8.76829"]]},{"id":"7798f6b8.76829","type":"csv","z":"299cb148.4f9016","name":"","sep":",","hdrin":true,"hdrout":"","multi":"mult","ret":"\\n","temp":"","skip":"0","x":470,"y":300,"wires":[["5f52ef84.52d8b"]]},{"id":"3d83be1a.f5396a","type":"join","z":"299cb148.4f9016","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":850,"y":220,"wires":[["d724845e.64327"]]},{"id":"13f34aca.f0f74d","type":"function","z":"299cb148.4f9016","name":"Add topic \"capture\"","func":"msg.topic = \"capture\";\n\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":140,"wires":[["3d83be1a.f5396a"]]},{"id":"5f52ef84.52d8b","type":"function","z":"299cb148.4f9016","name":"Add topic \"prediction\"","func":"msg.topic = \"prediction\";\n\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":300,"wires":[["3d83be1a.f5396a"]]}]
