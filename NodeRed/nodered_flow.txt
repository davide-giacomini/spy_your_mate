[{"id":"b5d1af96.0416f8","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"b2191ffc.fbb6f","type":"ui_button","z":"b5d1af96.0416f8","name":"","group":"8d2cdc77.495e7","order":0,"width":0,"height":0,"passthru":false,"label":"click","color":"","bgcolor":"","icon":"","payload":"","payloadType":"date","topic":"","x":230,"y":120,"wires":[["209e2dac.09dada","7ec133a1.493584","83883a66.b2743"]]},{"id":"876ca6de.bbf188","type":"debug","z":"b5d1af96.0416f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":650,"y":380,"wires":[]},{"id":"209e2dac.09dada","type":"ui_toast","z":"b5d1af96.0416f8","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":690,"y":260,"wires":[]},{"id":"7ec133a1.493584","type":"ui_text","z":"b5d1af96.0416f8","group":"8d2cdc77.495e7","order":0,"width":0,"height":0,"name":"","label":"Click Here!","format":"{{msg.payload}}","layout":"row-spread","x":690,"y":60,"wires":[]},{"id":"83883a66.b2743","type":"file in","z":"b5d1af96.0416f8","name":"Capture file","filename":"/home/user/spy_your_mate/NodeRed/capture2_test_csv_from_wireshark.csv","format":"lines","chunk":false,"sendError":false,"x":370,"y":380,"wires":[["6edd21d.e347a6"]]},{"id":"6edd21d.e347a6","type":"csv","z":"b5d1af96.0416f8","name":"","sep":",","hdrin":"","hdrout":"","multi":"one","ret":"\\n","temp":"","skip":"0","x":350,"y":500,"wires":[["2a87ad15.1b00f2"]]},{"id":"5728f208.aff43c","type":"function","z":"b5d1af96.0416f8","name":"","func":"let firstIndex = 0;\nlet cont = true;\n\n// DA CAMBIARE PERCHE' NON TIENE CONTO CHE IL PAYLOAD\n// VIENE RIPETUTAMENTE SOVRASCRITTO\n\nmsg.payload.forEach(function (entry) {\n    \n    msg.payload.id = entry.col1;\n    msg.payload.time = entry.col2;\n    \n    if (msg.payload.time < 75) {\n        msg.payload.person = 1;\n    }\n    else if (msg.payload.time < 137) {\n        msg.payload.person = 0;\n    }\n    else if (msg.payload.time < 209) {\n        msg.payload.person = 1;\n    }\n    else if (msg.payload.time < 273) {\n        msg.payload.person = 0;\n    }\n    else {\n        msg.payload.person = 1;\n    }\n});\n\nlet subarray = msg.payload.slice(firstIndex, firstIndex+100);\n\nmsg.payload = subarray;\n\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":620,"wires":[[]]},{"id":"2a87ad15.1b00f2","type":"debug","z":"b5d1af96.0416f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":650,"y":500,"wires":[]},{"id":"8d2cdc77.495e7","type":"ui_group","z":"","name":"Button","tab":"af16ca46.f30ab","disp":true,"width":"6","collapse":false},{"id":"af16ca46.f30ab","type":"ui_tab","z":"","name":"Demo","icon":"dashboard"}]
